{% extends "base.html" %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <!-- Header -->
        <div class="col-12">
            <div class="text-center mb-4">
                <h1 class="display-5 fw-bold text-primary">
                    <i class="fas fa-route me-3"></i>Career Path Predictor
                </h1>
                <p class="lead text-muted">
                    Get personalized career guidance and discover your optimal professional journey
                </p>
            </div>
        </div>
    </div>

    <!-- Simple Assessment Form -->
    <div class="row">
        <div class="col-lg-6 mx-auto">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-user-tie me-2"></i>Career Assessment
                    </h5>
                </div>
                <div class="card-body">
                    <form id="careerForm">
                        <!-- Current Status -->
                        <div class="mb-3">
                            <label class="form-label">Current Role</label>
                            <input type="text" class="form-control" name="current_role" placeholder="e.g., Software Developer, Marketing Coordinator" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Years of Experience</label>
                            <select class="form-select" name="experience" required>
                                <option value="">Select experience level</option>
                                <option value="0-1">0-1 years</option>
                                <option value="2-4">2-4 years</option>
                                <option value="5-7">5-7 years</option>
                                <option value="8-10">8-10 years</option>
                                <option value="10+">10+ years</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Industry</label>
                            <select class="form-select" name="industry" required>
                                <option value="">Select industry</option>
                                <option value="technology">Technology</option>
                                <option value="finance">Finance</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="education">Education</option>
                                <option value="marketing">Marketing</option>
                                <option value="consulting">Consulting</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <!-- Goals -->
                        <div class="mb-3">
                            <label class="form-label">Career Goal</label>
                            <select class="form-select" name="goal" required>
                                <option value="">Select your goal</option>
                                <option value="leadership">Move into leadership</option>
                                <option value="technical">Become technical expert</option>
                                <option value="entrepreneurship">Start my own business</option>
                                <option value="international">Work internationally</option>
                                <option value="work_life_balance">Better work-life balance</option>
                                <option value="higher_salary">Increase salary significantly</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Preferred Work Style</label>
                            <select class="form-select" name="work_style">
                                <option value="team">Team collaboration</option>
                                <option value="independent">Independent work</option>
                                <option value="client_facing">Client-facing roles</option>
                                <option value="research">Research and analysis</option>
                                <option value="creative">Creative projects</option>
                            </select>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-magic me-2"></i>Predict My Career Path
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Section (initially hidden) -->
    <div class="row mt-4" id="resultsSection" style="display: none;">
        <div class="col-12">
            <div class="card shadow">
                <div class="card-header bg-success text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-map me-2"></i>Your Career Path Prediction
                    </h5>
                </div>
                <div class="card-body" id="resultsContent">
                    <!-- Results will be inserted here -->
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.getElementById('careerForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Get form data
    const formData = new FormData(this);
    const data = Object.fromEntries(formData);
    
    // Generate career path
    generateCareerPath(data);
});

function generateCareerPath(data) {
    const prediction = predictCareerPath(data);
    
    const resultsHTML = `
        <div class="row">
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="fas fa-target me-2"></i>Recommended Next Step</h6>
                    </div>
                    <div class="card-body">
                        <h5 class="text-primary">${prediction.nextRole}</h5>
                        <p>${prediction.nextRoleDescription}</p>
                        <div class="timeline-estimate">
                            <small class="text-muted">
                                <i class="fas fa-clock me-1"></i>Timeline: ${prediction.timeline}
                            </small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="fas fa-chart-line me-2"></i>Long-term Vision</h6>
                    </div>
                    <div class="card-body">
                        <h5 class="text-success">${prediction.longTermRole}</h5>
                        <p>${prediction.longTermDescription}</p>
                        <div class="salary-estimate">
                            <small class="text-muted">
                                <i class="fas fa-dollar-sign me-1"></i>Potential salary: ${prediction.salaryRange}
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="fas fa-list-check me-2"></i>Action Plan</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-primary">Skills to Develop:</h6>
                                <ul class="list-unstyled">
                                    ${prediction.skillsNeeded.map(skill => `<li><i class="fas fa-arrow-right text-primary me-2"></i>${skill}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-primary">Next Steps:</h6>
                                <ul class="list-unstyled">
                                    ${prediction.actionSteps.map(step => `<li><i class="fas fa-check-circle text-success me-2"></i>${step}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="fas fa-lightbulb me-2"></i>Career Advice</h6>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <strong>Personalized Recommendation:</strong> ${prediction.advice}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    document.getElementById('resultsContent').innerHTML = resultsHTML;
    document.getElementById('resultsSection').style.display = 'block';
    
    // Scroll to results
    document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
}

function predictCareerPath(data) {
    // Simple career path logic
    const predictions = getCareerPredictions();
    
    const key = `${data.industry}_${data.goal}_${data.experience}`;
    const defaultPrediction = predictions.default;
    
    // Get specific prediction or use default
    const prediction = predictions[data.industry] && predictions[data.industry][data.goal] 
        ? predictions[data.industry][data.goal] 
        : defaultPrediction;
    
    // Adjust timeline based on experience
    let timeline = prediction.timeline;
    if (data.experience === '0-1') {
        timeline = timeline.replace('1-2', '2-3').replace('6-12', '12-18');
    } else if (data.experience === '10+') {
        timeline = timeline.replace('2-3', '1-2').replace('12-18', '6-12');
    }
    
    return {
        ...prediction,
        timeline: timeline
    };
}

function getCareerPredictions() {
    return {
        technology: {
            leadership: {
                nextRole: "Senior Software Engineer",
                nextRoleDescription: "Lead technical projects and mentor junior developers while building management skills.",
                timeline: "1-2 years",
                longTermRole: "Engineering Manager",
                longTermDescription: "Manage engineering teams and drive technical strategy for products.",
                salaryRange: "$140k - $200k+",
                skillsNeeded: ["Team leadership", "Project management", "Strategic thinking", "Communication"],
                actionSteps: ["Take on team lead responsibilities", "Complete management training", "Build stakeholder relationships", "Develop technical vision"],
                advice: "Focus on developing both technical excellence and people management skills. Start mentoring others and taking on cross-functional projects."
            },
            technical: {
                nextRole: "Senior Developer/Architect",
                nextRoleDescription: "Become the go-to technical expert and design complex systems.",
                timeline: "1-2 years",
                longTermRole: "Principal Engineer/CTO",
                longTermDescription: "Lead technical architecture decisions and innovation across the organization.",
                salaryRange: "$160k - $250k+",
                skillsNeeded: ["System design", "Advanced programming", "Architecture patterns", "Technical leadership"],
                actionSteps: ["Master advanced technologies", "Contribute to open source", "Design system architecture", "Mentor other engineers"],
                advice: "Deepen your technical expertise in emerging technologies and focus on system design and architecture skills."
            },
            international: {
                nextRole: "Global Product Developer",
                nextRoleDescription: "Work on products with international reach and diverse teams.",
                timeline: "6-12 months",
                longTermRole: "International Tech Lead",
                longTermDescription: "Lead technical initiatives across multiple countries and cultures.",
                salaryRange: "$120k - $180k+",
                skillsNeeded: ["Cross-cultural communication", "Global compliance", "Remote collaboration", "Language skills"],
                actionSteps: ["Learn international regulations", "Join global projects", "Improve language skills", "Build international network"],
                advice: "Focus on remote collaboration skills and understanding international markets. Consider working for global tech companies."
            }
        },
        finance: {
            leadership: {
                nextRole: "Senior Financial Analyst",
                nextRoleDescription: "Lead financial planning initiatives and guide strategic decisions.",
                timeline: "1-2 years",
                longTermRole: "Finance Director",
                longTermDescription: "Oversee financial operations and strategy for business units.",
                salaryRange: "$130k - $190k+",
                skillsNeeded: ["Strategic planning", "Team management", "Financial modeling", "Executive communication"],
                actionSteps: ["Lead major financial projects", "Complete MBA or CFA", "Build executive relationships", "Develop business acumen"],
                advice: "Combine financial expertise with business strategy knowledge. Focus on becoming a strategic business partner."
            },
            technical: {
                nextRole: "Quantitative Analyst",
                nextRoleDescription: "Use advanced mathematics and programming for financial modeling.",
                timeline: "6-12 months",
                longTermRole: "Head of Quantitative Research",
                longTermDescription: "Lead quantitative strategy and algorithm development.",
                salaryRange: "$150k - $220k+",
                skillsNeeded: ["Advanced mathematics", "Programming (Python/R)", "Statistical modeling", "Machine learning"],
                actionSteps: ["Master quantitative tools", "Complete advanced certifications", "Publish research", "Build algorithmic models"],
                advice: "Develop strong programming and mathematical skills. Focus on data science and algorithmic trading strategies."
            }
        },
        default: {
            nextRole: "Senior Professional",
            nextRoleDescription: "Advance to a senior level in your current field with expanded responsibilities.",
            timeline: "1-2 years",
            longTermRole: "Department Leader",
            longTermDescription: "Lead a team or department in your area of expertise.",
            salaryRange: "$100k - $150k+",
            skillsNeeded: ["Leadership", "Communication", "Strategic thinking", "Industry expertise"],
            actionSteps: ["Take on leadership roles", "Develop expertise", "Build professional network", "Pursue relevant certifications"],
            advice: "Focus on developing both technical skills and leadership capabilities. Build strong relationships within your industry."
        }
    };
}
</script>
{% endblock %}